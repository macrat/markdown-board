# ADR-0001: WebSocket再接続のカスタム実装を行わない

## ステータス

決定済み (2026-02-06)

## コンテキスト

GitHub Issue #40 にて、WebSocket接続エラー時のバックグラウンド再接続の実装が提案された。提案内容は以下の通り:

- WebSocket接続エラーイベントの捕捉
- 指数バックオフによる自動再接続
- UIにエラー通知を出さずバックグラウンドで復旧
- 再接続後のYjs同期の再開

## 決定

この機能を実装しない。

## 理由

### y-websocket に同等の機能が既に存在する

このプロジェクトが使用している y-websocket には、WebSocket切断時の自動再接続機能がすでに組み込まれている。カスタム実装を追加すると、y-websocket の内部ロジックと重複・競合する可能性がある。

### ミニマリズムの原則

プロダクト哲学の「ミニマリズム — 機能は必要最小限に。『あったら便利かも』は追加しない」に基づき、既存ライブラリが提供する機能を重複して実装することは避けるべきである。

### 判断基準の適用

- **それがなくても目的は達成できないか？** → y-websocket の再接続機能で目的は達成できている
- **複雑さの増加に見合うか？** → ライブラリと重複するコードはメンテナンスコストを増やすだけで、ユーザー体験の改善にはつながらない

## 影響

- Issue #40 は対応しない
- WebSocket再接続に関する動作は y-websocket のデフォルト挙動に委ねる
- 将来 y-websocket の再接続挙動に問題が見つかった場合は、まず y-websocket 側での対応を検討する
